<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <!-- JS, Popper.js, and jQuery -->
            <script
            src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
            integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
            crossorigin="anonymous">
        </script>
        <script
            src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
            integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
            crossorigin="anonymous">
        </script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
            integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
            crossorigin="anonymous" >
        </script>
        
            
        <!-- CSS only -->
        <link
            rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
            integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
            crossorigin="anonymous"
        />
    <link rel="stylesheet" href="css/mathdrag.css">
    <title>Lv2 - Drag Even numbers</title>
</head>
<nav class="navbar navbar-expand-lg navbar-light navbar-transparent font-weight-bold" style="margin: 0.8vw;">
    <a class="navbar-brand" href="#">
    <img src="images/logo1.png" width="248" height="65" alt="" loading="lazy" />
    </a>
    <button
    class="navbar-toggler"
    type="button"
    data-toggle="collapse"
    data-target="#navbarNavDropdown"
    aria-controls="navbarNavDropdown"
    aria-expanded="false"
    aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
    </button>
    <div
    class="collapse navbar-collapse"
    id="navbarNavDropdown"
    style="
        position: absolute;
        right: 10vw;
        font-family: Arial Rounded MT Bold;
        font-size: 1.5vw;">
        <ul class="navbar-nav">
            <li class="nav-item" style="margin-left: 2vw">
                <a class="nav-link1" href="home.php">Home <span class="sr-only">(current)</span></a>
            </li>
        <div style="margin-left: 3vw">
            <li class="nav-item dropdown">
                <a
                class="nav-link1 dropdown-toggle"
                href="#"
                id="navbarDropdownMenuLink"
                role="button"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                >
                Games
                </a>
                <div
                class="dropdown-menu"
                aria-labelledby="navbarDropdownMenuLink"
                >
                <a class="dropdown-item" href="math.php">Math</a>
                <a class="dropdown-item" href="art.php">Art</a>
                <a class="dropdown-item" href="science.php">Science</a>
                <a class="dropdown-item" href="geographic.php">Geographic</a>
                </div>
            </li>
        </div>

        <li class="nav-item" style="margin-left: 3vw">
            <a class="nav-link1" href="portfolio.php">Profile</a>
        </li>
        <li class="nav-item" style="margin-left: 3vw">
            <a class="nav-link1" href="about.php">About</a>
        </li>
        <form class="form-inline">
            <button
                class="btn btn-sm btn-outline-secondary"
                type="button"
                style="
                font-family: Arial Rounded MT Bold;
                font-size: 1vw;
                margin-left: 3vw;
                "
            >
            <a href="login.php?action=logout" style=" text-decoration:none; color: #999999;">Logout</a>
            </button>
        </form>
        </ul>
    </div>
</nav>
<div style="text-align: center; margin-top: 200px; margin-bottom: 100px;">
    <h2 style="color: #6354BD; font-size: 40px;">Can you distinguish all even numbers?</h2>
    <div>
        <p style="margin-top: 50px; font-size: 18px;">If you can select all of them correctly, you can get a perfect score of 50 points.</p>
    </div>
</div>
<body>
    <main class="main">
        <section class="left-part" style="background-image: url(images/notebook.jpg); background-size: 60vw 50vw;">
            <section class="score" style="background-color: rgb(110, 109, 109,0.65);color: blanchedalmond;padding: 3vh;text-align: center;font-size: 1vw;">
                <p>Please Find the <span class="bigfont"> Even numbers </span> from the right and drag them to the left area.  <br> Please note that you can drag up to <span class="bigfont"> 5 </span> numbers, and each correct drag will add 10 points. You can get up to <span class="bigfont"> 50 </span> points.</p>
                <h3>Current score:</h3>
                <span class="correct" style="color: rgb(255, 153, 0); font-size: 24px;font-weight: bolder;">0</span>
                <h3>Total selected numbers:</h3>
                <span class="total" style="color:rgb(255, 153, 0); font-size: 24px;font-weight: bolder;">0</span>
            </section>

            <script>
                var correct = 0;
                var total = 0;
                var toolarray = ["tupian2", "tupian3", "tupian7", "tupian8", "tupian10"];
                const scoreSection = document.querySelector(".score");
                const correctSpan = scoreSection.querySelector(".correct");
                const totalSpan = scoreSection.querySelector(".total");
                correctSpan.textContent = correct;
                totalSpan.textContent = total;
            </script>

            <div class="button" id="resultbutton" style="visibility: hidden;">    
                <a href="" onclick="moreFunction();return false" style="color: black;">See the description of Even!</a>
            </div>

            <div class="maching-pairs"  id='drop'>
                <div class="left" id='drop1'></div>
                <div class="left" id='drop2'></div>
                <div class="left" id='drop3'></div>
                <div class="left" id='drop4'></div>
                <div class="left" id='drop5'></div>
                <div class="left" id='drop6'></div>
                <div class="left" id='drop7'></div>
                <div class="left" id='drop8'></div>
                <div class="left" id='drop9'></div>
                <div class="left" id='drop10'></div>
                <div class="left" id='drop11'></div>
                <div class="left" id='drop12'></div>
                <div class="left" id='drop13'></div>
                <div class="left" id='drop14'></div>
                <div class="left" id='drop15'></div>
                <div class="left" id='drop16'></div>
                <div class="left" id='drop17'></div>
                <div class="left" id='drop18'></div>
                <div class="left" id='drop19'></div>
                <div class="left" id='drop20'></div>
                <div class="left" id='drop21'></div>
                <div class="left" id='drop22'></div>
                <div class="left" id='drop23'></div>
                <div class="left" id='drop24'></div>
                <div class="left" id='drop25'></div>
                <div class="left" id='drop26'></div>
                <div class="left" id='drop27'></div>
                <div class="left" id='drop28'></div>
                <div class="left" id='drop29'></div>
                <div class="left" id='drop30'></div>
            </div>
            <div style="display: flex;margin: 0;padding: 0;">
                <div class="button" id="backbutton" style="margin: 0;padding: 0;">    
                    <a href="1-math-game-level.php" style="color: black; margin-left: 5vw;">Back</a>
                </div>
                <div class="button" id="nextbutton" style="margin: 0;padding: 0;visibility: hidden;">    
                    <a href="1-math-game-level.php?action=increase" style="color: black; margin-left: 43vw;">Complete</a>
                </div>

            </div>
        </section>

        <section class="draggable-items">
            <div id="right">
                <section class="s1">
                    <div id='txt1' draggable="true" class="dragable txt txt1">
                        <img class="img" id="tupian1" src="images/23.png" title="23" alt="img1" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>
    
                    <div id='txt2' draggable="true" class="dragable txt txt2">
                        <img class="img" id="tupian2" src="images/10.png" alt="img2" title="10" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>    

                    <div id='txt3' draggable="true" class="dragable txt txt3">
                        <img class="img" id="tupian3" src="images/38.png" alt="img3" title="38" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>  

                    <div id='txt4' draggable="true" class="dragable txt txt4">
                        <img class="img" id="tupian4" src="images/5.png" alt="img4" title="5" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>  

                    <div id='txt5' draggable="true" class="dragable txt txt5">
                        <img class="img" id="tupian5" src="images/67.png" alt="img5" title="67" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>  

                </section>
        
                <section class="s1">
                    <div id='txt6' draggable="true" class="dragable txt txt6">
                        <img class="img" id="tupian6" src="images/11.png" alt="img6" title="11" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>
    
                    <div id='txt7' draggable="true" class="dragable txt txt7">
                        <img class="img" id="tupian7" src="images/24.png" alt="img7" title="24" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>       

                    <div id='txt8' draggable="true" class="dragable txt txt8">
                        <img class="img" id="tupian8" src="images/66.png" alt="img8" title="66" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>  

                    <div id='txt9' draggable="true" class="dragable txt txt9">
                        <img class="img" id="tupian9" src="images/7.png" alt="img9" title="7" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>  

                    <div id='txt10' draggable="true" class="dragable txt txt10">
                        <img class="img" id="tupian10" src="images/96.png" alt="img10" title="96" style="width: 6vw; height: 6vw; min-width: 60px;min-height: 40px;"/>
                    </div>  

 
                </section>
                    
                <script>
                    function UsFunction(){
                    alert("You have already chose 5 Numbers! Your final score is :" + correct)
                    }

                    function moreFunction(){
                    window.open ("https://en.wikipedia.org/wiki/Even", "newwindow", "height=920, width=1400, left=250, top=80, toolbar =no, menubar=no, scrollbars=no, resizable=no, location=no, status=no")
                    }


                    let txtObj = document.getElementsByClassName('txt')
                    for ( let i = 0; i < txtObj.length; i++) {
                        txtObj[i].ondragstart = handle_start
                        txtObj[i].ondrag = handle_drag
                        txtObj[i].ondragend = handle_end
                    }
                    function handle_start(e) {
                        e.dataTransfer.setData("Text", e.target.id)
                        console.log(e.target.id)
                    }
                    function handle_drag(e) {
                        console.log('handle_drag')
                    }
                    function handle_end(e) {
                        console.log('handle_end')
                    }
            
                    let target = document.getElementById('drop')
                    target.ondragenter = handle_enter
                    target.ondragover = handle_over
                    target.ondragleave = handle_leave
                    target.ondrop = handle_drop

                    function handle_enter(e) {
                        e.preventDefault()
                        console.log('handle_enter')
                    }
                    function handle_over(e) {
                        e.preventDefault()
                        let returnObj = e.dataTransfer.getData("Text")
                        console.log(returnObj +'-handle_over')
                    }
                    function handle_leave(e) {
                        e.preventDefault()
                        let returnObj = e.dataTransfer.getData("Text")
                        console.log(returnObj)
                        console.log('handle_leave')
                    }
                    function handle_drop(e) {
                        e.stopPropagation();
                        e.preventDefault()
                        let returnObj = e.dataTransfer.getData("Text")

                        /* The most significant function for the whole Drag and Drop mini game */
                        // total is the total item number, correct is the current score
                        // When returnObj(drop it to the correct area), To determine whether the corresponding conditions are met to increase the score,
                        //  or the total number of items reaches the upper limit pop-up window game.
                        if (returnObj) {
                            e.target.appendChild(document.getElementById(returnObj))
                            total++;
                            totalSpan.textContent = total;
                            if (toolarray.indexOf(returnObj) != -1){
                                correct += 10;
                                correctSpan.textContent = correct;
                            }

                            if (total == 5){
                                UsFunction();
                                document.getElementById("resultbutton").style.visibility="visible";
                                document.getElementById("nextbutton").style.visibility="visible";
                            }
                        }
                        console.log(returnObj)
                    }
                </script>
            </div>
        </section>
    </main>
</body>
</html>